# Справочник предопределенных переменных
Переменные из этого списка определяются в момент деплоя роли на сервер и добавляются в секцию и файл `.env` 
Их можно использовать в любом участке кода роли

| Переменная| Версия SManager|Описание|
|----------|:-------------:|:------|
| ODS_SM_SERVER_IP |  0 | IP сервера на который применяется роль |
| ODS_SM_USER |    0   |  Имя пользователя в SManager |
| ODS_SM_COMPOSE_NAME | 0 | Название роли |
| ODS_SM_COMPOSE_SYS_NAME | 0 | Техническое название роли (пробелы удалены, добавлен суффикс с id роли) Пример: `PowerDNSmaster_26` |
| ODS_SM_GENERATE_RANDOM_0_20 | 0.2.7 |  Случайная строка. Длина (20 символов) может быть любой. Вместо префикса "0" можно писать любую строку |
| ODS_SM_GENERATE_UUIDv4_0 | 0.2.7 | Случайный UUIDv4. Вместо префикса "0" можно писать любую строку |

Генератор переменных

Генерирует рандомные значения переменных, поведение настраиваемое

Вечная проблема 1: при копировании docker-compose.yml не хочется менять пароли по умолчанию.  Одни разработчики намеренно их не заполняют, другие оставляют значения по умолчанию, которые потом не меняются. в итоге имеем не смененные пароли по умолчанию.

Пример 2: некоторый софт, например OpenCTI требует для каждого контейнера случайный UUIDv4, который приходится заполнять руками.

Теперь можно сделать так:

``` пример 1: генерация пароля при добавлении роли и управление им в веб итерфейсе
x-SManager:
  properties:
    - "Login: ${LOGIN}"
  ui_edit_vars:
    Login: LOGIN
    Password: ODS_SM_GENERATE_RANDOM_0_20
services:
  samba:
    command: -s "Mount;/mnt" -s "Bobs Volume;/mnt2;yes;no;no;${LOGIN}" -u "${LOGIN};${ODS_SM_GENERATE_RANDOM_0_20}"
```

```Пример2: генерация рандомного UUIDv4 в OpenCTI
services:
  connector-virustotal-livehunt-notifications:
    image: opencti/connector-virustotal-livehunt-notifications:5.4.1
    environment:
      - OPENCTI_URL=http://opencti:8080
      - OPENCTI_TOKEN=ChangeMe
      - CONNECTOR_ID=${ODS_SM_GENERATE_UUIDv4_0}
```
цифры после названия функции (RANDOM или UUIDv4) определяют длину значнеия и дополняют назания переменной для уникальности. количество переменных не ограиничено. окончание может быть текстом:
пример 1: сгенерировать рандомное значение из 20 символов
```
ODS_SM_GENERATE_RANDOM_0_20
```
пример 2: рандомный UUIDv4. Длина всегда должна быть одинаковой, по этому можно только сменить окончание:
```
ODS_SM_GENERATE_UUIDv4_0 или ODS_SM_GENERATE_UUIDv4_bubu
```